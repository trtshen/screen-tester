<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Screen Tester</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.38/browser.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.3.2/react.production.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.3.2/react-dom.production.min.js"></script>

	<style>
		body, html {
			margin: 0;
			padding: 0;
			height: 100%;
			overflow: hidden;
		}

		#background {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: -1;
		}

		.test {
		    position : absolute;
		    width    : 200px;
		    height   : 200px;
		    left     : 50%;
		    top      : 50%;
		    margin-left : -100px;
		    margin-top  : -100px;
		    z-index: 1;
		}

		.custom-button { 
			display: inline-block;
			padding: 6px 12px;
			margin-bottom: 0;
			font-size: 14px;
			font-weight: 400;
			line-height: 1.42857143;
			text-align: center;
			white-space: nowrap;
			vertical-align: middle;
			cursor: pointer;
			user-select: none;
			background-image: none;
			border: 1px solid transparent;
			border-radius: 4px;
			color: #333;
			background-color: #fff;
			border-color: #ccc;
		}

		.custom-button:hover {
			color: #333;
			background-color: #e6e6e6;
			border-color: #adadad;
		}

		:-webkit-full-screen #background {
			background: inherit !important;
		}

		:-moz-full-screen #background {
			background: inherit !important;
		}

		:fullscreen #background {
			background: inherit !important;
		}

		.hidden-button {
			opacity: 0;
			transition: opacity 0.3s ease;
		}

		.visible-button {
			opacity: 1;
			transition: opacity 0.3s ease;
		}
	</style>
</head>
<body>
	<div id="background"></div>
	<div id="content"></div>
	<script type="text/babel">
		var ToggleFullScreen = React.createClass({
			getInitialState: function() {
				return {
					isFullScreen: false,
					buttonVisible: true
				};
			},
			
			componentDidMount: function() {
				// Add event listeners for fullscreen change
				document.addEventListener('fullscreenchange', this.onFullScreenChange);
				document.addEventListener('webkitfullscreenchange', this.onFullScreenChange);
				document.addEventListener('mozfullscreenchange', this.onFullScreenChange);
				document.addEventListener('MSFullscreenChange', this.onFullScreenChange);
				
				// Add event listeners for mouse movement and touch
				document.addEventListener('mousemove', this.showButton);
				document.addEventListener('touchstart', this.showButton);
			},
			
			componentWillUnmount: function() {
				// Clean up event listeners
				document.removeEventListener('fullscreenchange', this.onFullScreenChange);
				document.removeEventListener('webkitfullscreenchange', this.onFullScreenChange);
				document.removeEventListener('mozfullscreenchange', this.onFullScreenChange);
				document.removeEventListener('MSFullscreenChange', this.onFullScreenChange);
				
				document.removeEventListener('mousemove', this.showButton);
				document.removeEventListener('touchstart', this.showButton);
				
				// Clear any existing timers
				if (this.hideTimer) {
					clearTimeout(this.hideTimer);
				}
			},
			
			onFullScreenChange: function() {
				var isFullScreen = !!(
					document.fullscreenElement ||
					document.mozFullScreenElement ||
					document.webkitFullscreenElement ||
					document.msFullscreenElement
				);
				
				if (!isFullScreen) {
					document.body.style.background = '';
				}
				
				this.setState({
					isFullScreen: isFullScreen,
					buttonVisible: !isFullScreen ? true : this.state.buttonVisible
				});
			},
			
			showButton: function() {
				// Only handle show/hide logic when in fullscreen
				if (!this.state.isFullScreen) return;
				
				// Show button
				this.setState({ buttonVisible: true });
				
				// Clear existing timer if there is one
				if (this.hideTimer) {
					clearTimeout(this.hideTimer);
				}
				
				// Set new timer to hide button after 1 second
				this.hideTimer = setTimeout(() => {
					this.setState({ buttonVisible: false });
				}, 500);
			},
			
			toggleScreen: function() {
				var elem = document.documentElement;

				if (!document.fullscreenElement &&
				    !document.mozFullScreenElement &&
			      	!document.webkitFullscreenElement &&
			      	!document.msFullscreenElement) {

					if (elem.requestFullscreen) {
						elem.requestFullscreen();
					} else if (elem.mozRequestFullScreen) {
						elem.mozRequestFullScreen();
					} else if (elem.webkitRequestFullscreen) {
						elem.webkitRequestFullscreen();
					} else if (elem.msRequestFullscreen) {
						elem.msRequestFullscreen();
					}
		      	} else {
				    if (document.exitFullscreen) {
				      document.exitFullscreen();
				    } else if (document.msExitFullscreen) {
				      document.msExitFullscreen();
				    } else if (document.mozCancelFullScreen) {
				      document.mozCancelFullScreen();
				    } else if (document.webkitExitFullscreen) {
				      document.webkitExitFullscreen();
				    }
		      	}
			},
			render: function() {
				var buttonClass = "custom-button " + 
					(this.state.isFullScreen && !this.state.buttonVisible ? "hidden-button" : "visible-button");
				
				return (
					<button className={buttonClass} onClick={this.toggleScreen}>Toggle Full Screen</button>
				);
			}
		});

		var ScreenTester = React.createClass({
		    componentDidMount: function () {
		        document.documentElement.addEventListener('click', this.handleClick);
		    },
		    componentWillUnmount: function () {
		        document.documentElement.removeEventListener('click', this.handleClick);
		    },
			getInitialState: function() {
				return {
					patterns: [
						// Solid colors
						'rgb(255,0,0)', // Red
						'rgb(0,255,0)', // Green
						'rgb(0,0,255)', // Blue
						'rgb(255,255,0)', // Yellow
						'rgb(255,0,255)', // Magenta
						'rgb(0,255,255)', // Cyan
						'rgb(0,0,0)', // Black
						'rgb(255,255,255)', // White
						'rgb(192,192,192)', // Light Grey (75%)
						'rgb(128,128,128)', // Mid Grey (50%) - Note: was 127,127,127, standard is 128
						'rgb(64,64,64)', // Dark Grey (25%)
						
						// Linear gradients
						'linear-gradient(to right, red, blue)',
						'linear-gradient(to bottom, green, yellow)',
						'linear-gradient(45deg, purple, orange)',
						'linear-gradient(to right, black, white)',
						
						// Radial gradients  
						'radial-gradient(circle, red, blue)',
						'radial-gradient(ellipse, white, black)',
						
						// Stripe patterns
						'repeating-linear-gradient(90deg, red 0px, red 50px, blue 50px, blue 100px)',
						'repeating-linear-gradient(0deg, green 0px, green 25px, white 25px, white 50px)',
						'repeating-linear-gradient(45deg, black 0px, black 10px, white 10px, white 20px)',
						'repeating-linear-gradient(-45deg, black 0px, black 5px, white 5px, white 10px)',
						
						// Grid patterns
						'linear-gradient(90deg, transparent 49%, black 49%, black 51%, transparent 51%), linear-gradient(0deg, transparent 49%, black 49%, black 51%, transparent 51%)',
						// Finer grid
						'repeating-linear-gradient(0deg, #ccc, #ccc 1px, transparent 1px, transparent 20px), repeating-linear-gradient(90deg, #ccc, #ccc 1px, transparent 1px, transparent 20px)',
						
						// Checkerboard pattern (using linear gradients for better compatibility)
						'repeating-linear-gradient(0deg, black 0px, black 25px, white 25px, white 50px), repeating-linear-gradient(90deg, black 0px, black 25px, transparent 25px, transparent 50px)',
						// Finer checkerboard
						'repeating-linear-gradient(45deg, #000 0, #000 5px, #fff 5px, #fff 10px), repeating-linear-gradient(-45deg, #000 0, #000 5px, #fff 5px, #fff 10px)',

						// Color transition tests
						'linear-gradient(to right, #000000, #111111, #222222, #333333, #444444, #555555, #666666, #777777, #888888, #999999, #aaaaaa, #bbbbbb, #cccccc, #dddddd, #eeeeee, #ffffff)',
						
						// Color bars (simplified version)
						'linear-gradient(to right, red 0%, red 14.28%, green 14.28%, green 28.56%, blue 28.56%, blue 42.84%, cyan 42.84%, cyan 57.12%, magenta 57.12%, magenta 71.4%, yellow 71.4%, yellow 85.68%, white 85.68%, white 100%)',
						
						// High frequency vertical lines
						'repeating-linear-gradient(to right, black 0px, black 1px, white 1px, white 2px)',
						// High frequency horizontal lines
						'repeating-linear-gradient(to bottom, black 0px, black 1px, white 1px, white 2px)'
					],
					patternIndex: 0
				};
			},
			handleClick: function(event) {
				if (event.target.tagName !== 'BUTTON') {
					this.changeColour();
				}
			},
			changeColour: function() {
				var nextIndex = (++this.state.patternIndex) % this.state.patterns.length;
				var backgroundElement = document.getElementById('background');
				var pattern = this.state.patterns[nextIndex];
				
				backgroundElement.style.background = pattern;
				
				if (document.fullscreenElement || document.webkitFullscreenElement || 
					document.mozFullScreenElement || document.msFullscreenElement) {
					document.body.style.background = pattern;
				}
				
				this.setState({ patternIndex: nextIndex });
			},
			render: function() {
			    return (
			    	<div className="test">
				    	<ToggleFullScreen />
			    	</div>
			    );
			}
		});

		ReactDOM.render(
		  <ScreenTester />,
		  document.getElementById('content')
		);
	</script>
</body>
</html>
